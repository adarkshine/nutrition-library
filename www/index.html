<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Nutrition Library</title>
<link rel="stylesheet" href="css/jquery.mobile-1.4.1.css" />
<script src="js/energize-min.js"></script>
<script src="js/jquery-2.1.0.js"></script>
<script src="js/jquery.mobile-1.4.1.js"></script>
<script type="text/javascript" src="phonegap.js"></script>
</head>

<body onload="onBodyLoad()">
<div data-role="page" id="home">
  <div data-role="content">
	<div style="margin-bottom: 40px;">
      <center>
	   <img src="" alt="" name="Logo" width="240" height="110" style="background-color: #FFFFFF">
	  </center>
	</div>
	<ul data-icon="false" data-role="listview" class id="homelist">
		  <li><a href="#nutrition">Nutrition</a></li>
		  <li><a href="#TaskView">Notes</a></li>
		  <li><a href="index2.html">About</a></li>
		  <li><a href="#index2">another</a></li>
		</ul>
	</div>
	<center>
  	<img src="img/Fruit_Basket_exotic.jpg" width="240" height="240">
    </center>
</div>

<div data-role="page" id="nutrition" data-theme="a"> 
	 <div data-role="content">
		<ul data-inset="true" data-role="listview" data-filter="true" data-filter-placeholder="FIND/FILTER" >
		  <li><a href="#">Apples</a></li>
		  <li><a href="#">Almonds</a></li>
		  <li><a href="#">Bananas</a></li>
		  <li><a href="#">Broccoli</a></li>
		  <li><a href="#">Cauliflower</a></li>
		  <li><a href="#">Cherries</a></li>
		  <li><a href="#">Chicken</a></li>
		  <li><a href="#">test</a></li>
		  <li><a href="#">test</a></li>
		  <li><a href="#">test</a></li>
		  <li><a href="#">test</a></li>
		  <li><a href="#">test</a></li>
		  <li><a href="#">test</a></li>
		  <li><a href="#">test</a></li>
		  <li><a href="#">test</a></li>
		  <li><a href="#">test</a></li>
		  <li><a href="#">test</a></li>
		</ul>
	  </div>
	  <div data-role="footer" data-position="fixed">
		<center><a data-rel="back" class="ui-btn ui-btn-icon-left">Back</a></center>
	  </div>
</div>

<div data-role="page" id="notes" data-theme="a"> 
	 <div data-role="content">
		<textarea cols="40" rows="2" name="textarea" id="textarea" placeholder="Use this text area to write notes and then save them for later viewing."></textarea>
	 </div>
</div>

<div data-role="page" id="index2" data-theme="a">
<div data-role="header" data-position="inline" data-theme="b">
			<a href="#" data-theme="c" data-icon="delete" iconpos="notext" data-position="inline" data-rel="dialog" id="clear">Clear</a>
			<h1>TODO</h1>
			<a href="#addtodo" data-icon="add" iconpos="notext" data-position="inline" data-rel="dialog">Add</a>
		</div><p>
		<div class="content-primary" style="margin:3px;">	
			<ul data-role="listview" data-inset="true" data-split-icon="minus" data-split-theme="d" id="todo_list">
			</ul>
		</div>	
		<div data-role="footer" data-position="fixed" data-theme="b" style="text-align:center;padding:5px 0px;">
			<a href="index.html" data-theme="b" data-icon="star">home</a>
		</div> 
		</div>
		
		
		<script language="javascript">
var i = localStorage.length;
function onBodyLoad(){
	var todo = "";
	
	create_new_list();
	
	$("#clear").click(function(){
		localStorage.clear();
		$("#todo_list li").fadeOut(function(){
			$(this).html("");
		});
	});

	$("#remove").live("click",function(e){
		var index = $(this).closest("li").attr("id");
		$(this).closest("li").slideUp(function(){
		
			// remove the selected item
			localStorage.removeItem('names_'+index);
			
			// rearrange localstorage array 
			for(i=0; i<localStorage.length; i++) {
			  if( !localStorage.getItem("names_"+i)) {
				localStorage.setItem("names_"+i, localStorage.getItem('names_' + (i+1) ) );
				localStorage.removeItem('names_'+ (i+1) );
			  }
			}
			
			// clear existing list UI
			$("#todo_list").html("");
			
			// create new list
			create_new_list();
		});
	});
}
function create_new_list(){
	for (var i = 0; i < localStorage.length; i++){
		todo = localStorage.getItem('names_'+i);
		$("#todo_list").append('<li id="'+i+'"><a href="#">'+todo+'</a><a href="#" data-rel="dialog" data-transition="slideup" id="remove">Remove</a></li>');
	}	
	// Refresh list so jquery mobile can apply iphone look to the list
	$("#todo_list").listview();
	$("#todo_list").listview("refresh");	
}
function save_todo(){
	var todo = $("#textinput1").val();
	if(todo.length){
		// store item in local storage
		localStorage['names_'+i] = todo;

		// Update todo list
		$("#todo_list").append('<li id="'+i+'"><a href="#">'+todo+'</a><a href="#" data-rel="dialog" data-transition="slideup" id="remove">Remove</a></li>');
		
		// Refresh list so jquery mobile can apply iphone look to the list
		$("#todo_list").listview();
		$("#todo_list").listview("refresh");	
		i++;
	}
}
</script>


<div data-role="page" id="addtodo" data-theme="a">
	<div data-role="header" data-position="inline" data-theme="b">
		<h1>Add TODO</h1>
	</div>
	<div data-role="content" data-theme="b">
		<form action="">
			<label for="textinput1">
				TODO Text
			</label>
			<input id="textinput1" placeholder="Enter text here..." value="" type="text" />
			<a href="docs-dialogs.html" data-role="button" data-rel="back" data-theme="b" onClick="save_todo();" data-icon="check">Submit</a>       
			<a href="#index2" data-icon="delete" data-role="button" data-rel="back" data-theme="c" data-transition="fade" data-direction="reverse" id="cancel">Cancel</a>    
		</form>
	</div>
</div>
				
</body>
</html>
